/* GLOBAL SETTINGS */
body, html {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    background-color: #000;
    overflow: hidden;
    touch-action: none;
    font-family: 'Press Start 2P', cursive;
}

#game-container {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    aspect-ratio: 16/9;
    width: 100vw; max-height: 100vh;
    background: #111;
}

#bar-background {
    width: 100%; height: 100%;
    background-image: url('../assets/background.png');
    background-size: cover;
    background-position: center;
}

/* --- TAP STATION --- */
.tap-station {
    position: absolute;
    height: 350px; 
    width: 150px;
    top: 35%; /* Adjust vertical position of whole unit */
    transform: translateX(-50%);
}

/* 1. TOWER (Static Base) */
.tower {
    width: 120px; height: 300px;
    background-image: url('../assets/tower.png');
    background-size: 300% 100%;
    position: absolute;
    left: 15px; 
    bottom: 0; 
    pointer-events: none;
}
#tap-0 .tower { background-position: 0% 0; }
#tap-1 .tower { background-position: 50% 0; }
#tap-2 .tower { background-position: 100% 0; }

/* 2. HANDLE (The Tricky Part) */
.handle {
    /* FIX 1: SHRINK SIZE TO PREVENT BLEEDING */
    /* Reduced from 80px to 70px to "crop" out the neighbors */
    width: 70px; height: 70px;
    
    background-image: url('../assets/taps.png');
    background-size: 300% 200%;
    position: absolute;
    
    /* Adjust this to connect to the screw */
    bottom: 190px; 
    left: 40px; /* Re-centered slightly */
    
    pointer-events: none;
    z-index: 10;
    transform-origin: center center; 
}

/* Default Closed State */
#tap-0 .handle { background-position: 0% 0; }
#tap-1 .handle { background-position: 50% 0; }
#tap-2 .handle { background-position: 100% 0; }

/* --- OPEN STATE FIXES (Flipping the Rotation) --- */

/* TAP 1 (Barrel): Was -90deg (Top), Now +90deg (Bottom) */
#tap-0.pouring .handle {
    background-position-y: 100%; 
    /* Rotation flipped to put metal at bottom */
    transform: rotate(90deg) translate(0px, 0px); 
}

/* TAP 2 (Hops): Middle is perfect, just keeping it consistent */
#tap-1.pouring .handle {
    background-position-y: 100%;
    /* 180 flip for upside down sprite */
    transform: rotate(180deg) translate(0px, -5px);
}

/* TAP 3 (Wheat): Was 90deg (Top), Now -90deg (Bottom) */
#tap-2.pouring .handle {
    background-position-y: 100%;
    /* Rotation flipped to put metal at bottom */
    transform: rotate(-90deg) translate(0px, 0px);
}

/* 3. GLASS & LIQUID */
.glass-container {
    position: absolute;
    bottom: 0; 
    left: 35px;
    width: 80px; height: 120px;
}
.empty-glass {
    width: 100%; height: 100%;
    background-image: url('../assets/fullpints.png');
    background-size: 400% 100%;
    background-position: 0% 0;
}
.liquid-mask {
    position: absolute;
    bottom: 0; left: 0;
    width: 100%; height: 0%;
    overflow: hidden; 
    transition: height 0.1s linear;
}
.full-glass-sprite {
    position: absolute;
    bottom: 0; left: 0; 
    width: 80px; height: 120px; 
    background-image: url('../assets/fullpints.png');
    background-size: 400% 100%;
}
/* Beer Types (Columns) */
#tap-0 .full-glass-sprite { background-position: 33.33% 0; } /* Stout */
#tap-1 .full-glass-sprite { background-position: 66.66% 0; } /* IPA */
#tap-2 .full-glass-sprite { background-position: 100% 0; }   /* Lager */

/* 4. HITBOX */
.hitbox {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    cursor: pointer;
    z-index: 20;
}
#loading-screen { display: none; }
